<!DOCTYPE html>
<html lang="en">
   <!-- LOC:HEAD -->
   <head>
      <title>SmileBASIC Source</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width"><!--,maximum-scale=1">-->
      <meta name="rating" content="general">
      <meta name="description" content="New SmileBASIC Source">
      <link rel="shortcut icon" href="favicon.ico">
      <!-- LOC:UIFRAMEWORK -->
      <link rel="stylesheet" href="uikit-3.5.5/css/uikit.min.css" />
      <script src="uikit-3.5.5/js/uikit.min.js"></script>
      <script src="uikit-3.5.5/js/uikit-icons.min.js"></script>
      <!-- LOC:SCRIPT -->
      <script src="libbo.js?v=1602226039"></script>
      <script src="dom.js?v=1602226039"></script>
      <script src="api.js?v=1602226039"></script>
      <script src="index.js?v=1602226039"></script>
      <script src="sbs2-markup/highlight.js?v=1602226039"></script>
      <script src="sbs2-markup/parse.js?v=1602226039"></script>
      <script src="sbs2-markup/render.js?v=1602226039"></script>
      <!-- LOC:STYLE -->
      <link rel="stylesheet" href="index.css?v=1602226039" />
      <script>
//Scripts for templates/THIS file etc
function loglevel(el, replace)
{
   var loglevel = "log_" + replace;
   if(el.className.indexOf(loglevel) < 0)
      el.className += " " + loglevel;
   return loglevel;
}
function selectOptionSetup(el, replace)
{
   if(replace)
   {
      //Clear out the existing
      el.innerHTML = "";
      replace.forEach(x => //for(key in replace)
      {
         var option = document.createElement("option");
         option.textContent = x; //replace[key];
         option.setAttribute("value", x); //key);
         el.appendChild(option);
      });
   }
   return el.value;
}
function deferredselect(el, replace)
{
   if(replace)
   {
      //Set the value so the select MIGHT update
      el.value = replace;
      el.setAttribute("data-dv", replace); //This is so we can pull it out later if needed
   }

   //But always return what WE know the value to be
   return el.getAttribute("data-dv"); //el.value;
}
function showdrop(el, show)
{
   var dd = el.nextElementSibling;
   dd.style.width = el.clientWidth + "px";
   dd.style.minHeight = "0px";

   console.log("showdrop ", show);

   if(show)
   {
      UIkit.drop(dd).show();
   }
   else
   {
      el.blur();
      setTimeout(() => 
      {
         UIkit.drop(dd).hide(0);
         el.blur();
      }, 300);
   }
}
function retext(el, attr)
{
   [...el.childNodes].forEach(x =>
   {
      if(x.getAttribute)
         x.textContent = x.getAttribute(attr);
   });
}
      </script>
   </head>
   <!-- LOC:BODY -->
   <body>
      <div id="website" class="uk-flex uk-flex-column uk-height-1-1">
         <!-- LOC:TOPNAV -->
         <div id="topnav" class="databar uk-flex-middle" uk-navbar>
            <a data-connectionindicator class="uk-flex-none" href=".">
               <img uk-svg="ratio: 2" data-src="sbs.svg">
            </a>
            <!-- LOC:BREADCRUMBS -->
            <ul id="breadcrumbs" class="uk-breadcrumb uk-margin-remove-top uk-margin-remove-bottom
               bc-collapse uk-margin-small-right uk-margin-small-left">
            </ul>
            <!-- Just a spacer for now... maybe something will go here -->
            <div class="uk-flex-1">
            </div> 
            <!-- The burger side-menu thing-->
            <div class="uk-inline uk-flex-none">
               <a id="rightpanetoggle" uk-icon="icon: menu; ratio: 2" href="#"
                  uk-toggle="target: #rightpane; mode: click;"></a>
               <div id="globalalert" class="uk-label uk-label-danger
                  uk-position-bottom-right noevent" hidden>!</div>
            </div>
         </div>
         <!-- LOC:MAINWINDOW -->
         <div id="mainwindow" class="uk-flex-1 uk-grid-collapse uk-overflow-hidden" uk-grid>
            <!-- LOC:LEFTPANE -->
            <div id="leftpane" class=
              "uk-width-expand uk-flex uk-flex-column uk-height-1-1 uk-overflow-hidden">
               <!-- LOC:MAINCONTENT -->
               <div id="maincontentcontainer" uk-overflow-auto>
                  <div id="maincontentloading" class="uk-text-meta uk-flex uk-flex-middle" hidden>
                     <span class="uk-text-large uk-padding-small">Loading...</span>
                     <div uk-spinner></div>
                  </div> 
                  <!-- class="uk-position-top-left"></div>-->
                  <div id="maincontent">
                  </div>
               </div>
               <div class="uk-flex-none uk-flex" id="maincontentbar">
                  <div id="maincontentinfo" class="uk-flex uk-width-expand">
                  </div>
                  <div id="maincontentbarcontrols" class="uk-flex uk-height-1-1 uk-flex-middle">
                     <a href="#" class="ufk-text-primary" id="fulldiscussionmode"
                        uk-icon="icon: triangle-up; ratio: 1.2"></a>
                     <a href="#" class="ufk-text-primary" id="fullcontentmode"
                        uk-icon="icon: triangle-down; ratio: 1.2"></a>
                     <a href="#" class="ufk-text-primary" id="splitmodediscussion"
                        uk-icon="icon: comments; ratio: 1.1" ></a>
                     <a href="#" class="ufk-text-primary" id="splitmodecontent"
                        uk-icon="icon: file-text; ratio: 1.2" ></a>
                  </div>
               </div> 
               <!-- Need separate containers because lazy: one is for user
                  toggle, the other is for page toggle -->
               <div data-utgl class="uk-flex-none" hidden>
                  <div id="discussionuserlist" class="uk-flex uk-flex-wrap"></div>
               </div>
               <div id="discussionscontainer" class="uk-flex-1 uk-flex uk-flex-column">
                  <div id="discussions" class="uk-flex-1" uk-overflow-auto> 
                     <!-- Swap the discussions in and out of here -->
                  </div>
                  <div id="postarea" class="uk-inline" data-utgl hidden>
                     <!--<div id="postdiscussiontext"  role="textarea" contenteditable
                        class="input uk-flex-1 uk-textarea uk-width-expand"></div>-->
                     <textarea id="postdiscussiontext" 
                        class="uk-flex-1 uk-textarea uk-width-expand"></textarea>
                     <a href="#" uk-toggle="target: #fileupload" uk-icon="image"
                        class="uk-position-bottom-right" id="discussionimageselect"></a>
                  </div>
               </div>
            </div>
            <!-- LOC:RIGHTPANE -->
            <div id="rightpane" class="uk-width-auto uk-flex uk-flex-column uk-height-1-1" hidden>
               <!-- LOC:RIGHTPANENAV -->
               <div id="rightpanenav" class="tabnav uk-grid uk-grid-collapse 
                   uk-child-width-expand uk-text-center" 
                uk-switcher="swiping: false;">
      <!-- Shifted over for convenience, want to fit on one line please -->
      <div data-utgl uk-tooltip="Login"><a href="" class="uk-display-block"
            uk-icon="icon: user; ratio: 2"></a></div>
      <div data-utgl hidden class="uk-inline" uk-tooltip="User">
         <a href="" class="uk-display-block"><img id="navuseravatar" 
            width="40" height="40" class="" uk-img></img></a>
         <!--<div id="connectionalert" class="uk-label uk-label-danger
            uk-position-bottom-right noevent" hidden>!</div>-->
      </div>
      <div data-utgl hidden uk-tooltip="Recent Activity"><a href="" class="uk-display-block" 
            uk-icon="icon: list; ratio: 2"></a></div>
      <div data-utgl hidden class="uk-inline" uk-tooltip="Watch">
         <a href="" class="uk-display-block" uk-icon="icon: heart; ratio: 2"></a>
         <div id="watchglobalalert" class="uk-label uk-label-danger 
            uk-position-bottom-right noevent"></div>
      </div>
      <div uk-tooltip="Search"><a href="" class="uk-display-block" 
            uk-icon="icon: search; ratio: 2"></a></div>
      <div uk-tooltip="Logs"><a href="" class="uk-display-block" 
            uk-icon="icon: server; ratio: 2"></a></div>
               </div>
               <!-- LOC:RIGHTPANECONTENT -->
               <ul id="rightpanecontent" class="uk-switcher uk-flex-1" uk-overflow-auto>
                  <!-- LOC:USERNEW -->
                  <li>
                     <div class="uk-container" uk-margin>
                        <!-- LOC:USERLOGIN -->
                        <form id="loginform" class="uk-padding-small" onsubmit="return false">
                           <fieldset class="uk-fieldset" uk-margin>
                              <legend class="uk-legend">Login</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="username" type="text" placeholder="Username" required>
      <input class="uk-input" name="password" type="password" placeholder="Password" required>
      <div class="uk-inline">
      <input type="submit" value="Login" class="uk-button uk-button-primary">
      </div>
                           </fieldset>
                        </form>
                        <hr>
                        <!-- LOC:REGISTER -->
                        <ul id="registrationswitcher" class="uk-switcher">
                           <li>
                              <form id="registerform" class="uk-padding-small" onsubmit="return false">
                                 <fieldset class="uk-fieldset" uk-margin>
                                    <legend class="uk-legend">Register</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="username" type="text" placeholder="Username" required>
      <input class="uk-input" name="email" type="email" placeholder="Email" required>
      <input class="uk-input" name="password" type="password" placeholder="Password" required>
      <input class="uk-input" name="password2" type="password" placeholder="Confirm Password" required>
      <div class="uk-inline">
      <input type="submit" value="Register" class="uk-button uk-button-primary">
      </div>
                                 </fieldset>
                              </form>
                           </li>
                           <li>
                              <form id="registerconfirmform" class="uk-padding-small" onsubmit="return false">
                                 <fieldset class="uk-fieldset" uk-margin>
                                    <legend class="uk-legend">Confirm Account</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="confirmationKey" type="text" placeholder="Confirmation Code" required>
      <span class="uk-text-meta uk-display-block">
         You will receive an email with your confirmation code shortly</span>
      <div class="uk-inline">
      <input type="submit" value="Confirm Account" class="uk-button uk-button-primary">
      </div>
                                 </fieldset>
                              </form>
                           </li>
                           <li>
                              <form id="registerresendform" class="uk-padding-small" onsubmit="return false">
                                 <fieldset class="uk-fieldset" uk-margin>
                                    <legend class="uk-legend">Resend Confirmation</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="email" type="email" placeholder="Email" required>
      <span class="uk-text-meta uk-display-block">
         Note: This email is sent automatically at registration</span>
      <div class="uk-inline">
      <input type="submit" value="Resend email" class="uk-button uk-button-primary">
      </div>
                                 </fieldset>
                              </form>
                           </li>
                        </ul>
                        <ul class="uk-tab-bottom uk-flex-center"
                           uk-tab="connect: #registrationswitcher; 
                           animation: uk-animation-slide-right-medium, uk-animation-slide-left-medium">
                           <li><a id="registrationstep1" href="#">Step 1</a></li>
                           <li><a id="registrationstep2" href="#">Step 2</a></li>
                           <li><a id="registrationresend" href="#">Resend Email</a></li>
                        </ul>
                        <!-- LOC:PASSWORDRESET -->
                        <ul id="passwordresetswitcher" class="uk-switcher">
                           <li>
                              <form id="passwordresetform" class="uk-padding-small" onsubmit="return false">
                                 <fieldset class="uk-fieldset" uk-margin>
                                    <legend class="uk-legend">Password Reset</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="email" type="email" placeholder="Account Email" required>
      <div class="uk-inline">
      <input type="submit" value="Send email" class="uk-button uk-button-primary">
      </div>
                                 </fieldset>
                              </form>
                           </li>
                           <li>
                              <form id="passwordresetconfirmform" class="uk-padding-small" onsubmit="return false">
                                 <fieldset class="uk-fieldset" uk-margin>
                                    <legend class="uk-legend">Password Reset Confirm</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="resetKey" type="text" placeholder="Email Code" required>
      <input class="uk-input" name="password" type="password" placeholder="New Password" required>
      <input class="uk-input" name="password2" type="password" placeholder="Confirm New Password" required>
      <span class="uk-text-meta uk-display-block">
         An email was sent with a password reset code; use it here</span>
      <div class="uk-inline">
      <input type="submit" value="Reset Password" class="uk-button uk-button-primary">
      </div>
                                 </fieldset>
                              </form>
                           </li>
                        </ul>
                        <ul class="uk-tab-bottom uk-flex-center"
                           uk-tab="connect: #passwordresetswitcher; 
                           animation: uk-animation-slide-right-medium, uk-animation-slide-left-medium">
                           <li><a id="passwordresetstep1" href="#">Step 1</a></li>
                           <li><a id="passwordresetstep2" href="#">Step 2</a></li>
                        </ul>
                     </div>
                  </li>
                  <!-- LOC:USER -->
                  <li>
                     <div class="uk-container" uk-margin>
                        <div id="userdata" class="uk-padding-small" uk-margin>
                           <div class="uk-flex uk-flex-bottom">
                              <a id="userusername" href="" data-spa class="uk-display-inline uk-width-expand">
                                 <h2 class="uk-margin-remove"></h2>
                              </a>
                              <span id="userid" data-userid class="uk-text-meta uk-display-block"></span>
                           </div>
                           <hr>
                           <div uk-margin class="uk-margin-bottom">
                              <a href="" id="userchangeavatar" uk-toggle="target: #fileupload" 
                                 class="uk-display-block">Change Avatar</a>
                              <a href="#" id="userinvalidatesessions" 
                                 class="uk-display-block">Invalidate All Sessions</a>
                           </div>
                           <hr>
                           <div uk-margin>
                              <h4 class="ufk-text-meta">Device Settings
                                 <a href="#" id="refreshlocaloptions" 
                                    class="uk-align-right uk-text-small">Refresh</a>
                              </h4>
                              <div id="userlocaloptions"> </div>
                              <a class="uk-display-block" uk-toggle="#developerlocaloptions">
                                 Developer Options</a>
                              <div id="developerlocaloptions" hidden></div>
                              <button id="restoredefaultsettings" 
                                 class="uk-button uk-button-default">Restore Defaults</button>
                              <!--<button id="allowNotifications" 
                                 class="uk-button uk-button-default">Permit Notifications</button>-->
                           </div>
                           <button id="userlogout" class="uk-button uk-button-default">Logout</button>
                        </div>
                     </div>
                  </li>
                  <!-- LOC:ACTIVITY -->
                  <li id="pulseparent" class="uk-margin-large-bottom">
                     <ul id="pulse" class="uk-list uk-list-divider"></ul>
                  </li>
                  <!-- LOC:WATCHES -->
                  <li class="uk-margin-large-bottom">
                     <ul id="watches" class="uk-list uk-list-divider"></ul>
                  </li>
                  <!-- LOC:SEARCH -->
                  <li id="searchpane" class="uk-container uk-margin-large-bottom" uk-margin>
                     <div>
                        <div class="uk-flex uk-flex-middle uk-margin-small-top">
                           <form id="searchform" class="uk-width-expand uk-search uk-search-default">
                              <a href="#" id="searchformicon" class="uk-search-icon-flip" uk-search-icon></a>
                              <input id="searchinput" class="uk-search-input" placeholder="Search...">
                           </form>
                           <a href="" class="uk-margin-small-left uk-flex-none" uk-icon="cog"
                              uk-toggle="#searchconstraints"></a>
                        </div>
                        <div id="searchconstraints" class="uk-padding-small" hidden uk-margin>
                           <div class="uk-flex uk-flex-wrap" uk-margin>
            <div data-tmpl="searchconstraint" data-tmpld=
               '{"data-id":"searchpagesoption", "data-text":"Pages","data-checked":true}'></div>
            <div data-tmpl="searchconstraint" data-tmpld=
               '{"data-id":"searchusersoption", "data-text":"Users","data-checked":true}'></div>
            <div data-tmpl="searchconstraint" data-tmpld=
               '{"data-id":"searchcategoriesoption", "data-text":"Categories","data-checked":true}'></div>
            <div data-tmpl="searchconstraint" data-tmpld=
               '{"data-id":"searchchatoption", "data-text":"Chat","data-checked":false}' hidden></div>
                           </div>
                           <hr>
                           <div class="uk-flex uk-flex-wrap" uk-margin>
                              <label class="uk-margin-right uk-text-nowrap">
                                 <select class="uk-select uk-width-small uk-form-small" id="searchsortoption">
                                    <option value="id">Id</option>
                                    <option value="createDate">Create Date</option>
                                    <option value="editDate">Edit Date</option>
                                 </select>
                                 <span>Sort</span>
                              </label>
                              <label class="uk-margin-right uk-text-nowrap">
                                 <input id="searchreverseoption" type="checkbox" 
                                  class="uk-checkbox" checked>
                                 <span>Reverse</span>
                              </label>
                           </div>
                        </div>
                     </div>
                     <p class="uk-padding-small" id="nosearchresults" hidden>No results...</p>
                     <ul uk-accordion="multiple: true">
                        <div data-tmpl="searchresultsection" data-tmpld='{"data-text":"Pages"}'
                             id="searchpagesresults"></div>
                        <div data-tmpl="searchresultsection" data-tmpld='{"data-text":"Users"}'
                             id="searchusersresults"></div>
                        <div data-tmpl="searchresultsection" data-tmpld='{"data-text":"Categories"}'
                             id="searchcategoriesresults"></div>
                        <div data-tmpl="searchresultsection" data-tmpld='{"data-text":"Chat"}'
                             id="searchchatresults"></div>
                     </ul>
                     <!--<ul id="searchpane" class="uk-list uk-list-divider"></ul>-->
                  </li>
                  <!-- LOC:LOGS -->
                  <li id="logsparent">
                     <ul id="logs" class="uk-list uk-list-divider uk-list-collapse"></ul>
                  </li>
               </ul>
               <div id="rightpanefooter" class="databar uk-flex">
                  <span class="uk-flex-none">SmileBASIC Source - 2020</span>
                  <div class="uk-width-expand">
                     <!-- Just a space filler for now, do something with this later? -->
                  </div>
                  <!--<div class="uk-width-expand">
                     <a href="#" id="darkmodetoggle" uk-tooltip="Dark mode">&#x1F311;</a>
                  </div>-->
                  <a href="" class="uk-flex-none" uk-toggle="target: #aboutprivacy">About/Privacy</a>
               </div>
            </div>
         </div>
      </div>
      <!-- LOC:MODALS -->
      <div id="modals">
         <!-- LOC:ABOUT -->
         <div id="aboutprivacy" uk-modal>
            <div class="uk-modal-dialog" uk-overflow-auto>
               <button class="uk-modal-close-default" type="button" uk-close></button>
               <div class="uk-modal-header">
                  <h2 class="uk-modal-title">
                     <img uk-svg="ratio: 2.5" data-src="sbs.svg" class="uk-margin-small-right">
                     SmileBASIC Source
                  </h2>
               </div>
               <div id="aboutprivacybody" class="uk-modal-body">
                  <p>
   SmileBASIC Source is a fan website for the SmileBASIC applications made by 
   <a target="_blank" href="https://smileboom.com/en/">SmileBoom</a>. These 
   applications are available on the Nintendo 3ds, Wii U, and Switch, and 
   allow you to create programs in BASIC on those systems. Our main focus is 
   <a target="_blank" href="https://www.petc4.smilebasic.com/?lang=en">SmileBasic 4</a> 
   on Switch.
                  </p>
                  <h3 class="uk-heading-divider"><span>Privacy</span></h3>
                  <p>
   We collect your email ONLY for the purposes of identification. We do not
   share any of your information with ANY outside party and do not use it
   ourselves other than for identification. Your avatars are publicly visible
   to anyone, as is your username/nickname, but this is true of all websites
   with public access. Nobody can view your email other than you.
                  </p>
                  <p>
   We track the pages you visit on this website only for your benefit. We do
   not use cookies to track or to sell your usage to outside parties. The
   tracking is mostly for easy access to pages you've previously visited.
                  </p>
                  <h3 class="uk-heading-divider"><span>Technology/Credits</span></h3>
   <p><a target="_blank" href="https://getuikit.com/">UIkit</a></p>
   <p><a target="_blank" href="https://docs.microsoft.com/en-us/aspnet/core/">ASP.NET Core</a></p>
   <p><a target="_blank" href="https://docs.microsoft.com/en-us/ef/">Entity Framework Core</a></p>
   <p><a target="_blank" href="https://swagger.io/">Swagger</a></p>
   <p><a target="_blank" href="https://github.com/randomouscrap98/newsbs">Frontend Repo</a></p>
   <p><a target="_blank" href="https://github.com/randomouscrap98/contentapi">API Repo</a></p>
   <p>And a big thank you to: Yttria, 12me21, MasterR3C0RD, many
   more (please let me know if you want to be in this list)</p>
                  <h3 class="uk-heading-divider"><span>Technical Info</span></h3>
   <dl id="technicalinfo" data-template="technicalinfo" class="uk-description-list uk-text-break">
      <dt>API Version:</dt>
      <dd data-apiversion=".textContent"></dd>
      <dt>EntitySystem Version:</dt>
      <dd data-entitysystemversion=".textContent"></dd>
      <dt>API ROOT:</dt>
      <dd data-apiroot=".textContent"></dd>
   </dl>

                  <h3 class="uk-heading-divider"><span>Contact</span></h3>
   <h4>General contact:</h4>smilebasicsource@gmail.com
   <h4>Domain holder / Website Admin:</h4> Carlos Sanchez / randomous
                  </p>
               </div>
            </div>
         </div>
         <!-- LOC: RAWMODAL -->
         <div id="rawmodal" class="uk-modal-container" uk-modal>
            <div class="uk-modal-dialog">
               <button class="uk-modal-close-default" type="button" uk-close></button>
               <div class="uk-modal-header">
                  <h2 class="uk-modal-title" id="rawmodaltitle"></h2>
               </div>
               <div class="uk-modal-body" uk-overflow-auto>
                  <pre id="rawmodalraw"></pre>
               </div>
            </div>
         </div>
         <!-- LOC: RAWMODAL -->
         <div id="previewmodal" class="uk-modal-container" uk-modal>
            <div class="uk-modal-dialog">
               <button class="uk-modal-close-default" type="button" uk-close></button>
               <div class="uk-modal-header">
                  <h2 class="uk-modal-title" id="previewmodaltitle"></h2>
               </div>
               <div class="uk-modal-body" uk-overflow-auto>
                  <div id="previewmodalpreview"></div>
               </div>
            </div>
         </div>
         <!-- LOC: FILEUPLOAD -->
         <div id="fileupload" uk-modal>
            <div class="uk-modal-dialog" uk-overflow-auto>
               <button class="uk-modal-close-default" type="button" uk-close></button>
               <div class="uk-modal-header">
                  <h2 class="uk-modal-title">
                     <span uk-icon="icon: album; ratio: 2.5" class="uk-margin-small-right"></span>
                     Image Select
                  </h2>
               </div>
               <div id="fileuploadbody" class="uk-modal-body">
                  <!--<h3 class="uk-heading-divider"><span>Upload</span></h3>-->
                  <div id="fileuploadform" class="uk-placeholder uk-text-center">
                     <span uk-icon="icon: cloud-upload"></span>
                     <span class="uk-text-middle">Drop images or</span>
                     <div uk-form-custom>
                        <input type="file">
                        <span class="uk-link">choose from device</span>
                     </div>
                  </div>
                  <progress id="fileuploadprogress" class="uk-progress" value="0" max="100" hidden></progress>
                  <span class="uk-text-meta uk-display-block">After upload, image appears below</span>
                  <h3 class="uk-heading-divider uk-flex uk-flex-bottom">
                     <span class="uk-width-expand">Select</span>
                     <label class="uk-text-small uk-flex-none">
                        <input id="fileuploadsearchall" 
                           class="uk-checkbox uk-margin-large-left uk-margin-small-right" 
                           type="checkbox">Search All
                     </label>
                  </h3>
                  <div id="fileuploadslideshow" uk-slideshow uk-margin>
                     <ul id="fileuploaditems" class="uk-slideshow-items"></ul>
                     <div><ul id="fileuploadthumbnails" class="uk-thumbnav uk-flex-center" 
                           uk-margin></ul></div>
                     <div uk-margin>
                        <a id="fileuploadnewer" href="#" hidden>Newer</a>
                        <a id="fileuploadolder" class="uk-align-right" href="#" hidden>Older</a>
                     </div>
                     <button id="fileuploadselect" class="uk-button uk-button-primary"
                        uk-toggle="#fileupload">Select</button>
                  </div>
               </div>
            </div>
         </div>
         <div id="commentedit" uk-modal>
            <div class="uk-modal-dialog" uk-overflow-auto>
               <button class="uk-modal-close-default" type="button" uk-close></button>
               <div class="uk-modal-header">
                  <h2 class="uk-modal-title">
                     <span uk-icon="icon: commenting; ratio: 2.5" class="uk-margin-small-right"></span>
                     Comment Info
                  </h2>
               </div>
               <div id="commenteditbody" class="uk-modal-body" uk-margin>
                  <div id="commenteditpreview"></div>
                  <div class="editor" uk-margin>
                     <label><span>Format : </span>
                        <select id="commenteditformat" class="uk-select">
                           <option value="12y">12y</option>
                           <option value="plaintext">plaintext</option>
                           <option value="bbcode">bbcode</option>
                        </select>
                     </label>
                     <textarea id="commentedittext" rows=5 class="uk-width-expand 
                        uk-textarea uk-resize-vertical"></textarea>
                  </div>
                  <div class="controls" uk-margin>
                     <button class="uk-button uk-button-default" id="commenteditshowpreview">Preview</button>
                     <button class="uk-button uk-button-primary" id="commenteditedit">Edit</button>
                     <button class="uk-button uk-button-danger" id="commenteditdelete">Delete</button>
                     <p class="uk-text-meta">Note: you may not have permission
                        to edit or delete every comment</p>
                  </div>
                  <div id="commenteditinfo" class="uk-text-meta"></div>
               </div>
            </div>
         </div>
         <div id="permissionexplain" uk-modal>
            <div class="uk-modal-dialog" uk-overflow-auto>
               <button class="uk-modal-close-default" type="button" uk-close></button>
               <div class="uk-modal-header">
                  <h2 class="uk-modal-title">
   <span uk-icon="icon: question; ratio: 2.5" class="uk-margin-small-right"></span>
   About Permissions
                  </h2>
               </div>
               <div class="uk-modal-body" uk-margin>
                  <p>Pages and categories can be assigned permissions to
                  restrict access. Permissions are CRUD (Create, Read, Update,
                  Delete), and can be assigned for "everyone" (uid 0) or per
                  user.</p>
                  <p><b>Create:</b> allows posting INSIDE the thing (comments
                  on pages, pages inside categories)</p>
                  <p><b>Read:</b> allows viewing of the category or page (it
                  will not show up ANYWHERE for people who don't have this
                  permission: activity, search, etc; it basically doesn't exist)</p>
                  <p><b>Update:</b> allows editing of the category or page</p>
                  <p><b>Delete:</b> same as above but for deletion</p>
                  <p>For example, most pages are created with permissions "CR"
                  for uid 0 (everyone). This means everyone can post comments
                  (create) and read the page. To create a private page, remove
                  the "everyone" permission entirely.</p>
                  <p><b>NOTE:</b> "Super" users (admins) have create, update,
                  and delete permissions but NOT read, so they CANNOT read
                  private pages. The owner of the page or category (the
                  "creator") always has all permissions, even if none are
                  specified.</p>
               </div>
            </div>
         </div>
      </div>
      <!-- LOC:TEMPLATES -->
      <template id="templates" style="display: none">
         <li id="log" class="uk-flex uk-text-break">
            <span data-message=".textContent" data-level=".loglevel" class="uk-width-expand logmessage"></span>
            <time data-time=".textContent" class=""></time>
         </li>
         <div id="error" class="uk-alert-danger uk-text-break" uk-alert>
            <a class="uk-alert-close" uk-close></a>
            <p data-message=".textContent"></p>
         </div>
         <div id="success" class="uk-alert-success uk-text-break" uk-alert>
            <a class="uk-alert-close" uk-close></a>
            <p data-message=".textContent"></p>
         </div>
         <div id="spinner" uk-spinner></div>
         <li id="fupmain"><img data-imgsrc="data-src" width="" height="" alt=""
            class="uk-responsive-height uk-responsive-width uk-align-center"></li> 
         <li id="fupthumb" data-fileid="data-fid" data-number="uk-slideshow-item"><a href="#">
            <img data-imgsrc="src" width="60" alt=""></a></li>
         <!-- PW is the dual pulse-watch element (formatting is nearly identical) -->
         <li id="pw" data-contentid="data-cid">
            <div class="uk-flex uk-flex-middle">
               <a data-pwlink="href" class="uk-flex-1 uk-text-truncate uk-text-emphasis pwname
                  uk-margin-right" data-spa data-pwname=".textContent"></a>
               <a data-clearcount href="#">
                  <span data-pwcount=".textContent" class="uk-label uk-label-danger"></span>
               </a>
            </div>
            <div class="uk-flex uk-flex-bottom">
               <div class="pw-users"></div>
               <span data-pwtime=".textContent"
                  class="uk-flex-1 uk-text-right pw-time uk-text-meta">Just now</span>
            </div>
         </li>
         <!-- Dropdowns HAVE to be inside a uk-inline element! This DOES NOT
              WORK without that!! -->
         <div id="pwuser" class="uk-inline">
            <img data-useravatar="src" class="" width=20 height=20>
            <div uk-dropdown>
               <a data-userlink="href" data-spa class="username" data-username=".textContent"></a>
               <table class="uk-table uk-table-divider uk-table-small uk-table-middle">
                  <tr data-comment data-count="0" data-firstdate="" data-lastdate="" 
                     style="display: none"> 
                     <td class="uk-table-shrink"></td>
                     <td width=20><span uk-icon="comment" ></span></td>
                     <td></td>
                  </tr>
                  <tr data-edit data-count="0" data-firstdate="" data-lastdate="" 
                     style="display: none"> 
                     <td></td>
                     <td><span uk-icon="file-edit" ></span></td>
                     <td></td>
                  </tr>
                  <tr data-create data-count="0" data-firstdate="" data-lastdate="" 
                     style="display: none"> 
                     <td></td>
                     <td><span uk-icon="file-text"></span></td>
                     <td></td>
                  </tr>
               </table>
            </div>
         </div>
         <div id="stdcontentinfo" class="uk-display-inline uk-flex uk-flex-middle uk-width-expand">
            <a data-spa class="uk-flex-none" data-createlink="href">
               <img data-createavatar="src" width=20 height=20></a>
            <time class="uk-text-meta" data-createdate=".textContent"></time>
         </div>
         <!-- ROOT discussion, holds the whole thing? -->
         <div id="discussion" data-discussionid="data-did" data-id="id" class="">
            <!-- A placeholder, so inserting will always have a place to stop searching -->
            <div data-tmpl="messageframe" data-tmpld='{"userid":"0"}' style="display: none">
               <div data-tmpl="singlemessage" data-tmpld='{"messageid":"0"}'>
               </div>
            </div>
            <!--<div data-messageframe data-userid="0" style="display: none">
               <div data-messageid="0"></div>
            </div>-->
            <div data-loadolder class="uk-position-top-right uk-margin-small-right">
               <div data-loading uk-spinner="ratio: 0.5" hidden></div>
               <a href="#" data-loadmore class="uk-text-meta">Load older</a>
            </div>
         </div>
         <div id="messageframe" data-userid="data-uid" class="uk-flex uk-flex-top">
            <img class="uk-flex-none avatar" data-useravatar="src">
            <div class="messageframemain uk-width-expand">
               <div class="messageframeinfo uk-flex uk-flex-middle">
                  <a data-spa data-userlink="href" class="uk-flex-none username" 
                     data-username=".textContent"></a>
                  <time class="uk-text-meta uk-width-expand uk-text-truncate
                     uk-margin-small-left" data-frametime=".textContent"></time>
               </div>
               <div class="messagelist"> </div>
            </div>
         </div>
         <div id="singlemessage" tabindex="2" data-messageid data-id="id" 
            data-createdate data-editdate class="uk-flex">
            <div data-message=".renderComment" class="uk-width-expand 
               content uk-text-break"></div>
            <a href="#" class="messagecontrol" uk-icon="cog"></a>
         </div>
         <li id="breadcrumb">
            <a data-link="href" data-spa data-text=".textContent"></a>
         </li>
         <a id="sbslink" data-link="href" data-spa></a>
         <div id="booloption">
            <label> <!-- data-name="uk-tooltip"> -->
               <input data-input=".checked" type="checkbox" class="uk-checkbox uk-margin-right">
               <span data-text=".textContent" data-name="uk-tooltip"></span>
            </label>
         </div>
         <div id="numberoption">
            <label> <!-- data-name="uk-tooltip"> -->
               <input data-input=".value" type="number" data-step="step"
                  class="uk-input uk-margin-small-right uk-width-1-4">
               <span data-text=".textContent" data-name="uk-tooltip"></span>
            </label>
         </div>
         <div id="rawoption">
            <label> <!-- data-name="uk-tooltip"> -->
               <input data-input=".value" class="uk-input uk-margin-small-right uk-width-1-2">
               <span data-text=".textContent" data-name="uk-tooltip"></span>
            </label>
         </div>
         <div id="selectoption">
            <label> <!-- data-name="uk-tooltip"> -->
               <select data-options=".selectOptionSetup" data-input=".value" 
                  class="uk-select uk-margin-small-right uk-width-1-3">
               </select>
               <span data-text=".textContent" data-name="uk-tooltip"></span>
            </label>
         </div>
         <div id="searchresult" class="uk-flex uk-flex-middle">
            <img data-image="src" class="uk-flex-none" width=20>
            <a data-spa data-name=".textContent" data-link="href" 
             class="uk-width-expand uk-margin-small-left uk-margin-small-right"></a>
            <span data-meta=".textContent" class="uk-text-meta"></span>
         </div>
         <a id="discussionuser" class="uk-flex-none" data-userlink="href" data-spa>
            <img data-avatar="src" width=40>
         </a>
         <li id="subcat"><a data-link="href" data-spa data-name=".textContent">
            </a></li>
         <div id="pageitem" class="uk-flex uk-flex-wrap uk-flex-middle">
            <a class="uk-width-expand title uk-link-text" data-link="href" data-spa data-name=".textContent"></a>
            <time data-time=".textContent" class="uk-flex-none uk-text-meta"></time>
            <a class="uk-flex-none notext avatar" data-spa data-userlink="href"><img data-avatar="src" width=25></a>
         </div>
         <div id="history" class="uk-display-block">
            <h4>Activity:</h4>
            <div class="uk-cover historyloading" uk-spinner="ratio: 2"></div>
            <div class="historycontainer" uk-overflow-auto>
            </div>
            <div data-loadolder class="uk-flex uk-flex-right" hidden>
               <div data-loading uk-spinner="ratio: 0.5" hidden></div>
               <a href="#" data-loadmore class="uk-text-meta">Load older</a>
            </div>
         </div>
         <div id="historyitem" data-activityid class="uk-flex uk-flex-middle">
            <img data-avatar="src" width=20 class="uk-flex-none">
            <a data-spa data-username=".textContent" data-userlink="href"
               class="uk-flex-none username"></a>
            <span data-action=".textContent" class="uk-flex-none"></span>
            <a data-spa data-contentname=".textContent" data-contentlink="href" 
               class="uk-width-expand uk-text-truncate uk-margin-small-left uk-margin-small-right"></a>
            <time data-time=".textContent" class="uk-text-meta"></time>
         </div>
         <label id="searchconstraint" class="uk-margin-right uk-text-nowrap">
            <input data-checked=".checked" data-id="id" type="checkbox" class="uk-checkbox">
            <span data-text=".textContent"></span>
         </label>
         <li id="searchresultsection" hidden class="uk-open">
            <a class="uk-accordion-title" href="#">
               <span data-text=".textContent"></span> -
               <span data-count=".textContent"></span>
            </a>
            <div data-results class="uk-accordion-content">
            </div>
         </li>
         <div id="minisearch" "uk-inline"> <!-- class="uk-inline">-->
            <input data-search class="uk-search-input" type="search" data-placeholder="placeholder"
             onfocus="showdrop(this, true)" onblur="showdrop(this, false)"
             onclick="showdrop(this, true)">
            <div uk-drop="mode: none" class="uk-card uk-card-default
               uk-margin-remove" data-results uk-overflow-auto>
            </div>
         </div>
         <a id="minisearchresult" class="uk-flex uk-flex-middle hover uk-link-text">
            <img data-image="src" class="uk-flex-none" width=20>
            <span data-name=".textContent" class="uk-width-expand uk-margin-small-left 
               uk-margin-small-right"></span>
         </a>
         <div id="permissionuser" class="uk-flex uk-flex-middle">
            <img data-image="src" class="uk-flex-none" width=20>
            <span data-name=".textContent" class="uk-width-small uk-margin-small-left 
               uk-margin-small-right uk-text-truncate"></span>
            <input data-permission data-value=".value" placeholder="CRUD"
                class="uk-margin-small-right myinput uk-flex-none" >
         </div>
         <div id="categoryselect">
            <div data-loading uk-spinner></div>
            <!-- This is a SPECIAL select and will ALWAYS have its options
               filled AFTERWARDS, as a result, a special function must be used
               for setting the value-->
            <select class="uk-select" data-name="name" data-value=".deferredselect"></select>
         </div>
         <div id="youtube">
            <div class="uk-flex uk-flex-middle">
               <a data-link="href" data-title=".textContent" class="uk-text-truncate
                  uk-margin-small-right" target="_blank"></a>
               <a href="#" class="uk-flex-none" data-showplayer uk-icon="youtube"></a>
               <a href="#" class="uk-flex-none" data-hideplayer uk-icon="close" hidden></a>
            </div>
         </div>
         <div id="youtubeplayer" class="uk-margin-small-top">
            <iframe width=480 height=270 allow="autoplay; fullscreen" data-source="src"></iframe> 
         </div>
         <div id="collection" uk-sortable data-name="name" 
            class="uk-margin-small-bottom">
         </div>
         <a id="addeveryone" href="#">Add global permission</a>
         <div id="collectionitem" class="uk-flex uk-flex-middle uk-card uk-card-default">
            <div data-item class="uk-width-expand"></div>
            <a href="#" uk-icon="close" class="uk-text-danger uk-flex-none"
      onclick="event.preventDefault();var p=this.parentNode;p.parentNode.removeChild(p);"></a>
         </div>
         <!-- LOC:ROUTES -->
         <div id="routehome" class="uk-container uk-margin-top uk-margin-bottom">
            <h1>SmileBASIC Source</h1>
            <p>A community for talking about SmileBASIC, where you can create 
            BASIC programs on your Nintendo 3DS, Wii U, and Switch! 
            This website is in development! There's a lot of missing features, 
            but we're gonna keep adding stuff until it's good!</p>
            <h3><a href="?p=category-0" data-spa>Browse</a></h3>
            <div class="" data-homehistory></div>
            <a href="?p=test" data-spa>Test area</a>
         </div>
         <div id="routeerror" class="uk-container uk-margin-top uk-margin-bottom">
            <h1>ERROR - <span data-title=".textContent"></span></h1>
            <p data-message=".textContent" class="uk-text-danger"></p>
         </div>
         <div id="routetest" class="uk-container uk-margin-top uk-margin-bottom">
               <!--<div data-tmpl="categoryselect"
                  data-tmpld='{"data-value":503}'></div>-->
               <!--<div data-tmpl="minisearch" data-tmpld='{"data-placeholder":"search or whatever"}'></div>-->
      <button onclick="notifySuccess('Oh wow, look at that!')">Notify suc</button>
      <button onclick="notifySuccess('Oh wow, look at that! This is a message that will absolutely overflow')">Notify suc big</button>
      <button onclick="notifySuccess('i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i i')">Notify suc big</button>
      <button onclick="notifyError('Oh wow, look at that!')">Notify err</button>
      <button
         onclick="notifyError('jkfdls;jkfdsjfdklsfjdkfeirjdkfdkskcmdsfjdkfjdksfjdaklsfjdfdfdklfjdskfdkslfjdskfkdsjfdklsfjdkslfjdkslfjdkfjdskmksdlj')">Notify err</button>
         </div>
         <div id="routepage" class="uk-container uk-margin-top uk-margin-bottom">
            <!-- WARN: DUPLICATED IN ROUTEUSER -->
            <div class="uk-flex">
               <h1 class="uk-width-expand uk-margin-small-right" data-title=".textContent"></h1>
               <ul class="pagecontrols uk-flex-none uk-list uk-list-collapse uk-margin-remove">
                  <li><a href="#" data-watched uk-icon="heart"></a></li>
                  <li>
                     <a href="#" uk-icon="cog"></a>
                     <div uk-dropdown="pos: bottom-right; mode: click" class="uk-dropdown"> 
                        <ul class="uk-list uk-margin-remove-bottom">
                           <li><a data-editlink="href" data-spa>Edit Page</a></li>
                           <li><a href="#" data-viewraw>Raw Data</a></li>
                        </ul>
                     </div>
                  </li>
               </ul>
            </div>
            <p data-content=".renderContent" data-format="data-fmt" 
               class="uk-text-break content uk-margin-remove-top"></p>
         </div>
         <div id="routeuser" class="uk-container uk-margin-top uk-margin-bottom">
            <!-- WARN: DUPLICATED IN ROUTEPAGE -->
            <div class="uk-flex-inline">
               <h1 data-title=".textContent" class="uk-width-expand uk-margin-small-right"></h1>
               <ul class="pagecontrols uk-flex-none uk-list uk-list-collapse uk-margin-remove" hidden>
                  <li><a href="#" data-watched uk-icon="heart"></a></li>
                  <li><a href="#" uk-icon="cog"></a></li>
               </ul>
            </div>
            <img data-avatar="src" width=100 class="uk-align-right avatar">
            <p data-content=".renderContent" data-format="data-fmt" 
               class="uk-text-break content uk-margin-remove-top"></p>
            <div data-userhistory class="uk-margin-top uk-margin-bottom">
            </div>
         </div>
         <div id="routecategory" class="uk-container uk-margin-top uk-margin-bottom">
            <div class="uk-flex">
               <h1 class="uk-width-expand uk-margin-small-right" data-title=".textContent"></h1>
               <ul class="pagecontrols uk-flex-none uk-list uk-list-collapse uk-margin-remove">
                  <li>
                     <a href="#" uk-icon="cog"></a>
                     <div uk-dropdown="pos: bottom-right; mode: click" class="uk-dropdown"> 
                        <ul class="uk-list uk-margin-remove-bottom">
                           <li><a data-editlink="href" data-spa>Edit Category</a></li>
                           <li><a data-newlink="href" data-spa>Add Category</a></li>
                           <li><a data-newpagelink="href" data-spa>Add Page (MOVING!)</a></li>
                           <li><a href="#" data-viewraw>Raw Data</a></li>
                        </ul>
                     </div>
                  </li>
               </ul>
            </div>
            <p class="uk-text-meta uk-margin-remove-top" data-description=".textContent"></p>
            <li data-subcats class="lightblock uk-list uk-list-square uk-list-collapse"></li>
            <div data-pages class="uk-margin-top">
               <p data-nopages class="">
                  <span uk-icon="icon: database" class="uk-margin-small-right"></span>
                  <span>No pages</span>
               </p>
            </div>
         </div>
         <div id="routecategoryedit" class="uk-container uk-margin-top uk-margin-bottom">
            <h1 data-title=".textContent" class="uk-inline"></h1>
            <div>
               <form onsubmit="return false" class="uk-form-stacked pageform lightblock">
   <div class="uk-form-controls" uk-margin>
      <label class="uk-form-label" uk-margin>
         <span>Name:</span>
         <input class="uk-input uk-form-large" name="name">
      </label>
      <label class="uk-form-label" uk-margin>
         <span>Description:</span>
         <textarea rows=3 class="uk-textarea uk-resize-vertical" name="description"></textarea>
      </label>
      <label class="uk-form-label" uk-margin>
         <span>Parent Category:</span>
         <div data-categoryselect name="parentId"></div>
      </label>
      <label class="uk-form-label" uk-margin>
         <span>Allowed Page Types:</span>
         <input class="uk-input" name="values.allowedTypes">
      </label>
      <label class="uk-form-label" uk-margin>
         <span class="uk-flex uk-flex-middle">
            <span class="uk-margin-small-right">Permissions:</span> 
            <a href="#" uk-toggle="#permissionexplain" class="uk-flex-none uk-text-primary"
               uk-icon="icon: question; ratio: 0.75">
            </a>
         </span>
         <div data-permissions name="permissions">
         </div>
      </label>
      <label class="uk-form-label" uk-margin>
         <span>Local Supers:</span>
         <div data-localsupers name="localSupers">
         </div>
         <p class="uk-text-meta">Each local super user has edit and delete
          permissions on all pages at any level under this category</p>
      </label>
      <input type="submit" value="Submit" class="uk-button uk-button-primary">
   </div>
               </form>
               <p class="uk-text-meta">Note: you may be unable to edit or
               create new categories depending on your permissions.</p>
            </div>
         </div>
         <div id="routepageedit" class="uk-container uk-margin-top uk-margin-bottom">
            <h1 data-title=".textContent" class="uk-inline"></h1>
            <div>
               <form onsubmit="return false" class="uk-form-stacked pageform lightblock">
   <div class="uk-form-controls" uk-margin>
      <label class="uk-form-label" uk-margin>
         <span>Name:</span>
         <input class="uk-input uk-form-large" name="name">
      </label>
      <label class="uk-form-label" uk-margin>
         <span>Content:</span>
         <textarea rows=15 class="uk-textarea uk-resize-vertical" name="content"></textarea>
         <div class="uk-flex uk-flex-middle">
            <span>Markup:</span>
            <select name="values.markupLang" class="uk-select uk-margin-small-left uk-margin-small-right">
               <option value="12y" selected>12y</option>
               <option value="plaintext">plaintext</option>
            </select>
            <button data-preview class="uk-button uk-button-default">Preview</button>
         </div>
      </label>
      <label class="uk-form-label" uk-margin>
         <span>Parent Category:</span>
         <div data-categoryselect name="parentId"></div>
      </label>
      <label class="uk-form-label" uk-margin>
         <span class="uk-flex uk-flex-middle">
            <span class="uk-margin-small-right">Permissions:</span> 
            <a href="#" uk-toggle="#permissionexplain" class="uk-flex-none uk-text-primary"
               uk-icon="icon: question; ratio: 0.75">
            </a>
         </span>
         <div data-permissions name="permissions">
         </div>
      </label>
      <label class="uk-form-label" uk-margin>
         <span>Keywords (space separated):</span>
         <input class="uk-input" data-list name="keywords"></input>
      </label>
      <input type="submit" value="Submit" class="uk-button uk-button-primary">
   </div>
               </form>
               <p class="uk-text-meta">Note: you may be unable to edit or
               create new pages depending on your permissions.</p>
            </div>
         </div>
      </template>
      <!-- LOC:CONTROLS -->
      <div id="controls" style="display: none">
         <button id="toggleuserstate" uk-toggle="target: [data-utgl]" type="button" 
            onclick="document.querySelector('#rightpanenav > [hidden] a').click()">
         </button>
         <!--<ul id="discussionswitcher" uk-switcher="connect: #discussions">
         </ul>-->
      </div>
      <!-- LOC:MEMORY -->
      <div id="memory" style="display: none">
         <div id="discussionmemory">
         </div>
      </div>
   </body>
</html>
