<!DOCTYPE html>
<html lang="en">
   <!-- LOC:HEAD -->
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width"><!--,maximum-scale=1">-->
      <meta name="rating" content="general">
      <meta name="description" content="New SmileBASIC Source">
      <!-- LOC:UIFRAMEWORK -->
      <link rel="stylesheet" href="uikit-3.5.5/css/uikit.min.css" />
      <script src="uikit-3.5.5/js/uikit.min.js"></script>
      <script src="uikit-3.5.5/js/uikit-icons.min.js"></script>
      <!-- LOC:MYSCRIPTS -->
      <script src="libbo.js"></script>
      <!-- LOC:STYLE -->
<style>
body {
   position: absolute;
   top: 0;
   bottom: 0;
   left: 0;
   right: 0;
}
#top-nav {
   background-color: #444;
   color: #AAA;
}
a:hover { 
   color: inherit; 
}
#top-nav a:hover {
   color: #CCC;
}
#left-pane {
   /*background-color: lime;*/
}
#right-pane {
   background-color: rgba(128,128,128,0.05);
   border-left: 2px solid rgba(128,128,128,0.1);
   width: 30em;
   max-width: calc(100vw - 1px);
   min-width: 10em;
}
#nav-user-avatar {
   border-radius: 50rem;
}
#right-pane-nav {
   background-color: rgba(128,128,128,0.1);
}
#right-pane-nav a:hover {
   background-color: rgba(128,255,240,0.1);
}
/* Special styling JUST for the sidbar nav */
#right-pane-nav .uk-active {  
   background-color: rgba(128,255,240,0.4);
}
#logs {
   font-family: monospace;
   font-size: 0.8em;
}
#logs time { 
   font-size: 0.8em; 
   margin: 0.15em;
   opacity: 0.6;
}
.log_debug { color: #BBB; }
.log_error { color: #C42; }
.log_warn { color: #DA6; }
.tabnav > div {
   padding: 0.1em 0;
}
#post-area {
   height: 5em;
   background-color: rgba(128,128,128,0.05);
   border-top: 2px solid rgba(128,128,128,0.1);
   padding-bottom: 1px;
}
#post-area textarea {
   resize: none;
}
</style>
      <!-- LOC:SCRIPT -->
<script>
window.onload = function()
{
   log.Info("Window load event");

   var ww = Utilities.ConvertRem(Utilities.WindowWidth());
   log.Debug("Width REM: " + ww);

   if(ww >= 60)
      window['right-pane-toggle'].click();

   setupDebugLog();
};

function setupDebugLog()
{
   UIkit.util.on('#logs-parent', 'show', function () {
      //Find the last id, only display new ones.
      log.Debug("Debug log shown, rendering new messages");
      var lastId = (logs.lastElementChild ?  Number(logs.lastElementChild.dataset.id) : 0);
      var msgBase = document.querySelector("#templates [data-log]");
      for(var i = 0; i < log.messages.length; i++)
      {
         if(log.messages[i].id > lastId)
         {
            var logMessage = msgBase.cloneNode(true);
            logMessage.innerHTML = logMessage.innerHTML
               .replace("%message%", log.messages[i].message)
               .replace("%level%", log.messages[i].level)
               .replace("%time%", log.messages[i].time);
            logMessage.setAttribute("data-id", log.messages[i].id);
            logs.appendChild(logMessage);
         }
      }
   });
}
</script>
   </head>
   <!-- LOC:BODY -->
   <body>
      <div id="website" class="uk-flex uk-flex-column uk-height-1-1">
         <!-- LOC:TOPNAV -->
         <div id="top-nav" class="uk-flex-middle" uk-navbar>
            <!-- LOC:BREADCRUMBS -->
            <ul class="uk-breadcrumb uk-margin-remove-bottom">
               <li><a href=".">
                  <img uk-svg="ratio: 2" data-src="sbs.svg" class="uk-margin-small-right">
               </a></li>
            </ul>
            <!-- Just a spacer for now... maybe something will go here -->
            <div class="uk-flex-1">
            </div> 
            <!-- The burger side-menu thing-->
            <a id="right-pane-toggle" uk-icon="icon: menu; ratio: 2" href="#"
               uk-toggle="target: #right-pane; mode: click;"></a>
         </div>
         <!-- LOC:MAINWINDOW -->
         <div id="main-window" class="uk-flex-1 uk-grid-collapse uk-overflow-hidden" uk-grid>
            <!-- LOC:LEFTPANE -->
            <div id="left-pane" class=
              "uk-width-expand uk-flex uk-flex-column uk-height-1-1 uk-overflow-hidden">
               <!-- LOC:MAINCONTENT -->
               <div id="main-content" class="uk-flex-1" uk-overflow-auto>
                  <p>This is a lot of text. i am hoping it will continue so long
                  and long and long that it will eventually wrap or something,
                  showing you exactly wehre the pane ends</p>
                     <button uk-toggle="target: [data-utgl]" type="button" 
         onclick="document.querySelector('#right-pane-nav > [hidden] a').click()">
                        wow</button>
               </div>
               <div id="post-area" class="uk-flex" data-utgl hidden>
                  <textarea class="uk-flex-1 uk-textarea"></textarea>
               </div>
            </div>
            <!-- LOC:RIGHTPANE -->
            <div id="right-pane" class="uk-width-auto uk-flex uk-flex-column uk-height-1-1" hidden>
               <!-- LOC:RIGHTPANENAV -->
               <div id="right-pane-nav" class="tabnav uk-grid uk-grid-collapse 
                   uk-child-width-expand uk-text-center" 
                uk-switcher="swiping: false;">
      <!-- Shifted over for convenience, want to fit on one line please -->
      <div data-utgl><a href="" class="uk-display-block"
            uk-icon="icon: user; ratio: 2"></a></div>
      <div data-utgl hidden><a href="" class="uk-display-block"><img id="nav-user-avatar" 
            data-src="tempicon.png" width="40" height="40" uk-img></img></a></div>
      <div data-utgl hidden><a href="" class="uk-display-block" 
            uk-icon="icon: list; ratio: 2"></a></div>
      <div data-utgl hidden><a href="" class="uk-display-block" 
            uk-icon="icon: heart; ratio: 2"></a></div>
      <div><a href="" class="uk-display-block" 
            uk-icon="icon: server; ratio: 2"></a></div>
               </div>
               <!-- LOC:RIGHTPANECONTENT -->
               <ul id="right-pane-content" class="uk-switcher uk-flex-1" uk-overflow-auto>
                  <!-- LOC:USERLOGIN -->
                  <li>
                     <div class="uk-container" uk-margin>
                        <form id="login-form" class="uk-padding-small" onsubmit="return false">
                           <fieldset class="uk-fieldset" uk-margin>
                              <legend class="uk-legend">Login</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="username" type="text" placeholder="Username">
      <input class="uk-input" name="password" type="password" placeholder="Password">
      <input type="submit" value="Login" class="uk-button uk-button-primary">
                           </fieldset>
                        </form>
                        <hr>
                        <form id="register-form" class="uk-padding-small" onsubmit="return false">
                           <fieldset class="uk-fieldset" uk-margin>
                              <legend class="uk-legend">Register</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="username" type="text" placeholder="Username">
      <input class="uk-input" name="email" type="email" placeholder="Email">
      <input class="uk-input" name="password" type="password" placeholder="Password">
      <input class="uk-input" name="password2" type="password" placeholder="Confirm Password">
      <input type="submit" value="Register" class="uk-button uk-button-primary">
                           </fieldset>
                        </form>
                        <form id="resend-email-form" class="uk-padding-small" onsubmit="return false">
                           <fieldset class="uk-fieldset" uk-margin>
                              <legend class="uk-legend">Resend Confirmation</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="email" type="email" placeholder="Email">
      <input type="submit" value="Resend email" class="uk-button uk-button-primary">
                           </fieldset>
                        </form>
                        <form id="confirm-email-form" class="uk-padding-small" onsubmit="return false">
                           <fieldset class="uk-fieldset" uk-margin>
                              <legend class="uk-legend">Confirm Account</legend>
      <!-- Once again shifted over for convenience -->
      <input class="uk-input" name="username" type="text" placeholder="Confirmation Code">
      <input type="submit" value="Confirm Account" class="uk-button uk-button-primary">
                           </fieldset>
                        </form>
                     </div>
                  </li>
                  <!-- LOC:USER -->
                  <li>User-logged-in</li>
                  <!-- LOC:ACTIVITY -->
                  <li>list</li>
                  <!-- LOC:WATCHES -->
                  <li>heart</li>
                  <!-- LOC:LOGS -->
                  <li id="logs-parent">
                     <ul id="logs" class="uk-list uk-list-striped uk-list-collapse"></ul>
                  </li>
               </ul>
            </div>
         </div>
      </div>
      <!-- LOC:TEMPLATES -->
      <div id="templates" style="display: none">
         <li data-log data-id="1" class="uk-flex">
            <span class="log_%level% uk-width-expand">%message%</span>
            <time class="">%time%</time>
         </li>
      </div>
   </body>
</html>
